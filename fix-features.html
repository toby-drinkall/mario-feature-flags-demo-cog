<!DOCTYPE html>
<html>
<head>
    <title>Fix Features</title>
</head>
<body>
    <h1>Fixing QCount and Palette Swap</h1>
    <div id="result"></div>

    <script>
        // Get current state
        const pendingRemoval = JSON.parse(localStorage.getItem('pending_removal') || '[]');
        const removedFeatures = JSON.parse(localStorage.getItem('removed_features') || '[]');
        const pendingRestoration = JSON.parse(localStorage.getItem('pending_restoration') || '[]');

        console.log('Current state:');
        console.log('Pending removal:', pendingRemoval);
        console.log('Removed features:', removedFeatures);
        console.log('Pending restoration:', pendingRestoration);

        // Remove QCount and Palette Swap from all lists
        const newPendingRemoval = pendingRemoval.filter(f =>
            f.name !== 'QCount' && f.name !== 'Palette Swap'
        );
        const newRemovedFeatures = removedFeatures.filter(f =>
            f.name !== 'QCount' && f.name !== 'Palette Swap'
        );
        const newPendingRestoration = pendingRestoration.filter(f =>
            f.name !== 'QCount' && f.name !== 'Palette Swap'
        );

        // Save back to localStorage
        localStorage.setItem('pending_removal', JSON.stringify(newPendingRemoval));
        localStorage.setItem('removed_features', JSON.stringify(newRemovedFeatures));
        localStorage.setItem('pending_restoration', JSON.stringify(newPendingRestoration));

        document.getElementById('result').innerHTML = `
            <p><strong>Fixed!</strong></p>
            <p>QCount and Palette Swap have been returned to Testing Game Modes.</p>
            <p>Removed from pending_removal: ${pendingRemoval.length - newPendingRemoval.length}</p>
            <p>Removed from removed_features: ${removedFeatures.length - newRemovedFeatures.length}</p>
            <p>Removed from pending_restoration: ${pendingRestoration.length - newPendingRestoration.length}</p>
            <p><a href="cognition-dashboard-premium.html">Return to Dashboard</a></p>
        `;

        console.log('Fixed! New state:');
        console.log('Pending removal:', newPendingRemoval);
        console.log('Removed features:', newRemovedFeatures);
        console.log('Pending restoration:', newPendingRestoration);
    </script>
</body>
</html>
