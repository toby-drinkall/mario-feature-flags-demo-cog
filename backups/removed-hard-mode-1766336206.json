{
  "feature": "Hard Mode",
  "type": "removed",
  "timestamp": "$(date -Iseconds)",
  "file": "Source/settings/mods.js",
  "lineStart": 246,
  "lineEnd": 338,
  "originalCode": "        }, {\n            // http://www.themushroomkingdom.net/smb_breakdown.shtml#hard\n            \"name\": \"Hard Mode\",\n            \"description\": \"Like in Super Mario Bros Deluxe!\",\n            \"author\": {\n                \"name\": \"Josh Goldberg\",\n                \"email\": \"josh@fullscreenmario.com\"\n            },\n            \"enabled\": false,\n            \"events\": {\n                \"onAddThing\": function (mod, thing) {\n                    var spawn;\n                    if (thing.title === \"Goomba\") {\n                        spawn = thing.FSM.killReplace(\n                            thing,\n                            \"Beetle\", \n                            undefined,\n                            [ \"direction\", \"moveleft\", \"lookleft\", \"xvel\", \"yvel\", \"speed\" ]\n                        );\n                        spawn.mod = \"Hard Mode\";\n                    }\n                    else if (thing.title === \"Platform\") {\n                        thing.FSM.reduceWidth(thing, thing.FSM.unitsize * 8, true);\n                        thing.FSM.shiftHoriz(thing, thing.FSM.unitsize * 4);\n                    }\n                    \n                    if (thing.groupType === \"Character\") {\n                        thing.speed *= 1.4;\n                    }\n                },\n                \"onModEnable\": function (mod) {\n                    var FSM = FullScreenMario.FullScreenMario.prototype.ensureCorrectCaller(this),\n                        characters = FSM.GroupHolder.getCharacterGroup(),\n                        solids = FSM.GroupHolder.getSolidGroup(),\n                        attributes = [\"direction\", \"moveleft\", \"lookleft\", \"xvel\", \"yvel\", \"speed\"],\n                        spawn, thing, i;\n                    \n                    for (i = 0; i < characters.length; i += 1) {\n                        thing = characters[i];\n                        if (thing.title === \"Goomba\") {\n                            spawn = thing.FSM.killReplace(\n                                thing, \n                                \"Beetle\", \n                                undefined,\n                                attributes\n                            );\n                            spawn.mod = \"Hard Mode\";\n                            if (thing.xvel > 0) {\n                                spawn.FSM.flipHoriz(spawn);\n                            } else {\n                                spawn.FSM.unflipHoriz(spawn);\n                            }\n                        }\n                        thing.speed *= 1.4;\n                    }\n                    \n                    for(i = 0; i < solids.length; i += 1) {\n                        thing = solids[i];\n                        if(thing.title === \"Platform\") {\n                            thing.FSM.reduceWidth(thing, thing.FSM.unitsize * 8, true);\n                            thing.FSM.shiftHoriz(thing, thing.FSM.unitsize * 4);\n                        }\n                    }\n                },\n                \"onModDisable\": function (mod) {\n                    var FSM = FullScreenMario.FullScreenMario.prototype.ensureCorrectCaller(this),\n                        characters = FSM.GroupHolder.getCharacterGroup(),\n                        solids = FSM.GroupHolder.getSolidGroup(),\n                        attributes = [\"direction\", \"moveleft\", \"lookleft\", \"xvel\", \"yvel\", \"speed\"],\n                        thing, i;\n                    \n                    for (i = 0; i < characters.length; i += 1) {\n                        thing = characters[i];\n                        if (thing.title === \"Beetle\" && thing.mod === \"Hard Mode\") {\n                            thing.FSM.killReplace(\n                                thing, \n                                \"Goomba\", \n                                undefined,\n                                attributes\n                            );\n                        } else {\n                            thing.speed /= 1.4;\n                        }\n                    }\n                    \n                    for (i = 0; i < solids.length; i += 1) {\n                        thing = solids[i];\n                        if (thing.title === \"Platform\") {\n                            thing.FSM.increaseWidth(thing, thing.FSM.unitsize * 8);\n                            thing.FSM.shiftHoriz(thing, thing.FSM.unitsize * -4);\n                        }\n                    }\n                }\n            }\n        }",
  "restorationInstructions": "To restore this feature, insert the originalCode after line 244 in Source/settings/mods.js (after the Gradient Skies mod closing brace)"
}
